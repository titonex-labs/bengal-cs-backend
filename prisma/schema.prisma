generator client {
    provider = "prisma-client"
    output   = "../generated/prisma"
}

datasource db {
    provider = "postgresql"
}

//* Enum - SeasonStatus
enum SeasonStatus {
    UPCOMING
    ACTIVE
    ENDED
}

//* Model - Farmer
model Farmer {
    id         String   @id @default(uuid()) @db.Uuid
    agentId    String?  @db.Uuid
    name       String   @db.VarChar(50)
    fatherName String   @db.VarChar(50)
    phone      String   @unique @db.VarChar(15)
    address    String
    createdAt  DateTime @default(now()) @db.Timestamptz
    updatedAt  DateTime @updatedAt @db.Timestamptz

    @@map("farmer")
}

//* Model - Agent
model Agent {
    id        String   @id @default(uuid()) @db.Uuid
    name      String   @db.VarChar(50)
    phone     String   @unique @db.VarChar(15)
    isActive  Boolean  @default(true)
    createdAt DateTime @default(now()) @db.Timestamptz
    updatedAt DateTime @db.Timestamptz

    @@map("agent")
}

//* Model - Season
model Season {
    id        String       @id @default(uuid()) @db.Uuid
    year      String       @unique @db.VarChar(9)
    status    SeasonStatus
    createdAt DateTime     @default(now()) @db.Timestamptz

    @@map("season")
}

//* Model - ChamberLot
model ChamberLot {
    id             String   @id @default(uuid()) @db.Uuid
    floorNo        Int      @db.SmallInt
    chamberNo      Int      @db.SmallInt
    lotNo          Int      @db.SmallInt
    capacitySacks  Int      @db.SmallInt
    capacityWeight Decimal  @db.Decimal(8, 2)
    createdAt      DateTime @default(now()) @db.Timestamptz
    updatedAt      DateTime @updatedAt @db.Timestamptz

    @@map("chamber_lot")
}

//* Model - Position
model Position {
    id               String   @id @default(uuid()) @db.Uuid
    bookingId        String   @unique @db.Uuid
    storageReceiptId String   @unique @db.Uuid
    chamberId        String   @db.Uuid
    loadingPosition  String   @db.VarChar(15)
    sacks            Int
    note             String?  @db.VarChar(150)
    createdAt        DateTime @default(now()) @db.Timestamptz

    @@map("position")
}
